## Basics:

plyr and dplyr don't "add" behaviour to data frames, so we still use them (mostly):


```r
myDT <- data.frame(
    number=1:3,
    letter=c('a','b','c')
  ) # like data.frame constructor
myDT
```

```
##   number letter
## 1      1      a
## 2      2      b
## 3      3      c
```

We still rely on basics for reading data from CSVs and the like:


```r
D <- read.csv("TB_Burden_Data.csv")
head(names(D))
```

```
## [1] "country"     "iso2"        "iso3"        "iso_numeric" "g_whoregion"
## [6] "year"
```

##plyr is bare-bones:

It doesn't give us the nice extraction syntax data.table provides, so there's still some repetition:


```r
mean(D[D$country=='Afghanistan','e_prev_100k'])
```

```
## [1] 376.42
```
However, we can improve on that slightly using `with`:


```r
with(D, mean(e_prev_100k[country=='Afghanistan']))
```

```
## [1] 376.42
```

We extract multiple columns with base R:

```r
head(D[,c('e_prev_100k','e_prev_100k_lo',
    'e_prev_100k_hi')])
```

```
##   e_prev_100k e_prev_100k_lo e_prev_100k_hi
## 1         306            156            506
## 2         343            178            562
## 3         371            189            614
## 4         392            194            657
## 5         410            198            697
## 6         424            199            733
```

Summarisation is similar to data.table, however there's no need to use `list` on the new columns, and we specify the group before the application.


```r
library(plyr)
E <- D[with(D, country=='Afghanistan'),] 
ddply(E, .(), summarise, mid=mean(e_prev_100k),
       lo=mean(e_prev_100k_lo),
       hi=mean(e_prev_100k_hi) )
```

```
##    .id    mid     lo     hi
## 1 <NA> 376.42 187.21 630.67
```

`plyr` functions expect groupings, which is why the `.()` is needed. plyr is designed for the split-apply-combine pipeline.

Means for each country; take `D`, group by `country`, calculating mid. Summarise tells plyr to use one value for each group, and throw away all the other columns.

```r
head(ddply(D, .(country), summarise, mid=mean(e_prev_100k)))
```

```
##          country     mid
## 1    Afghanistan 376.417
## 2        Albania  29.333
## 3        Algeria 124.375
## 4 American Samoa  14.567
## 5        Andorra  29.921
## 6         Angola 388.583
```

Pete's more complicated example:


```r
head(ddply(D, .(country, year > 2000), summarise, lo=mean(e_prev_100k_lo),
       hi=mean(e_prev_100k_hi)))
```

```
##       country year > 2000      lo      hi
## 1 Afghanistan       FALSE 193.455 695.000
## 2 Afghanistan        TRUE 181.923 576.231
## 3     Albania       FALSE  15.182  60.273
## 4     Albania        TRUE  11.108  45.385
## 5     Algeria       FALSE  57.000 184.364
## 6     Algeria        TRUE  69.231 223.154
```

Sorting is a little bit nicer than base R:


```r
plot(arrange(D, e_prev_100k)$e_prev_100k)
```

![plot of chunk unnamed-chunk-9](figure/unnamed-chunk-9-1.png) 

Adding new columns to a data frame:

```r
head(mutate(D, country_t = paste0(country,year)))
```

```
##       country iso2 iso3 iso_numeric g_whoregion year e_pop_num e_prev_100k
## 1 Afghanistan   AF  AFG           4         EMR 1990  11731193         306
## 2 Afghanistan   AF  AFG           4         EMR 1991  12612043         343
## 3 Afghanistan   AF  AFG           4         EMR 1992  13811876         371
## 4 Afghanistan   AF  AFG           4         EMR 1993  15175325         392
## 5 Afghanistan   AF  AFG           4         EMR 1994  16485018         410
## 6 Afghanistan   AF  AFG           4         EMR 1995  17586073         424
##   e_prev_100k_lo e_prev_100k_hi e_prev_num e_prev_num_lo e_prev_num_hi
## 1            156            506      36000         18000         59000
## 2            178            562      43000         22000         71000
## 3            189            614      51000         26000         85000
## 4            194            657      59000         30000        100000
## 5            198            697      68000         33000        110000
## 6            199            733      75000         35000        130000
##   source_prev e_mort_exc_tbhiv_100k e_mort_exc_tbhiv_100k_lo
## 1   predicted                    37                       24
## 2   predicted                    46                       29
## 3   predicted                    54                       34
## 4   predicted                    60                       38
## 5   predicted                    65                       41
## 6   predicted                    69                       45
##   e_mort_exc_tbhiv_100k_hi e_mort_exc_tbhiv_num e_mort_exc_tbhiv_num_lo
## 1                       54                 4300                    2800
## 2                       61                 5800                    3700
## 3                       68                 7400                    4700
## 4                       73                 9100                    5800
## 5                       79                11000                    6800
## 6                       82                12000                    7800
##   e_mort_exc_tbhiv_num_hi e_mort_tbhiv_100k e_mort_tbhiv_100k_lo
## 1                    6400              0.04                 0.03
## 2                    7700              0.06                 0.05
## 3                    9400              0.08                 0.06
## 4                   11000              0.11                 0.09
## 5                   13000              0.13                 0.11
## 6                   14000              0.15                 0.12
##   e_mort_tbhiv_100k_hi e_mort_tbhiv_num e_mort_tbhiv_num_lo
## 1                 0.05                5                 4.1
## 2                 0.08                8                 6.2
## 3                 0.10               11                 8.3
## 4                 0.14               17                13.0
## 5                 0.16               22                17.0
## 6                 0.19               27                21.0
##   e_mort_tbhiv_num_hi source_mort e_inc_100k e_inc_100k_lo e_inc_100k_hi
## 1                   6    Indirect        189           157           238
## 2                  10    Indirect        191           167           227
## 3                  14    Indirect        191           171           217
## 4                  21    Indirect        189           171           209
## 5                  27    Indirect        188           169           208
## 6                  34    Indirect        188           166           209
##   e_inc_num e_inc_num_lo e_inc_num_hi source_inc e_tbhiv_prct
## 1     22000        18000        28000                    0.06
## 2     24000        21000        29000                    0.07
## 3     26000        24000        30000                    0.08
## 4     29000        26000        32000                    0.10
## 5     31000        28000        34000                    0.11
## 6     33000        29000        37000                    0.12
##   e_tbhiv_prct_lo e_tbhiv_prct_hi e_inc_tbhiv_100k e_inc_tbhiv_100k_lo
## 1            0.04            0.08             0.11                0.08
## 2            0.06            0.09             0.13                0.11
## 3            0.07            0.10             0.16                0.14
## 4            0.09            0.11             0.19                0.17
## 5            0.10            0.13             0.21                0.18
## 6            0.10            0.15             0.23                0.21
##   e_inc_tbhiv_100k_hi e_inc_tbhiv_num e_inc_tbhiv_num_lo
## 1                0.14              12                9.4
## 2                0.16              17               14.0
## 3                0.18              22               19.0
## 4                0.21              28               25.0
## 5                0.24              35               30.0
## 6                0.27              41               37.0
##   e_inc_tbhiv_num_hi source_tbhiv c_cdr c_cdr_lo c_cdr_hi       country_t
## 1                 16           NA    20       15       24 Afghanistan1990
## 2                 20           NA    96       80      110 Afghanistan1991
## 3                 24           NA    NA       NA       NA Afghanistan1992
## 4                 31           NA    NA       NA       NA Afghanistan1993
## 5                 39           NA    NA       NA       NA Afghanistan1994
## 6                 47           NA    NA       NA       NA Afghanistan1995
```

Most of the gotchas from data table don't exist:

 * assignment copies by value
 * column selection works as normal
 
all of the gotchas of data frames persist, however.

Bonus: read all CSV files matching "test*.csv" and produce one data frame back:

```r
ldply(list.files(pattern="test.*\\.csv"), read.csv)
```

```
##       X         a          b
## 1     1 0.0050184  0.3293716
## 2     2 0.1450430 -1.0659805
## 3     3 0.9306210  0.0059557
## 4     4 0.0478137  0.2718617
## 5     5 0.9166316 -0.6307349
## 6     6 0.7467375  0.3855689
## 7     7 0.2233456  1.3129355
## 8     8 0.9048643 -0.4330007
## 9     9 0.6539176 -1.0656918
## 10   10 0.7702912 -0.2095689
## 11   11 0.3876458  1.8202827
## 12   12 0.3618881 -0.1647675
## 13   13 0.7997884 -1.1416118
## 14   14 0.9600510 -0.3687121
## 15   15 0.3986461  0.4548723
## 16   16 0.2135665  0.5002771
## 17   17 0.1721996  0.0911074
## 18   18 0.6220638 -0.9055583
## 19   19 0.4083942  0.5755935
## 20   20 0.2404517  0.1726716
## 21   21 0.0263387 -0.0192462
## 22   22 0.7067306 -0.8043595
## 23   23 0.1682569  1.3059920
## 24   24 0.0955515 -0.4793747
## 25   25 0.7242629 -0.3373412
## 26   26 0.5495594 -1.2890557
## 27   27 0.5046848 -1.1350014
## 28   28 0.7234190 -1.3233172
## 29   29 0.5196818  1.5370953
## 30   30 0.3672783  0.1218874
## 31   31 0.7007317 -0.2212205
## 32   32 0.9172928  0.8463698
## 33   33 0.1743456 -0.0451544
## 34   34 0.5554566  0.4268652
## 35   35 0.0636974 -0.0786900
## 36   36 0.2859763 -1.6289265
## 37   37 0.0652860  0.6060063
## 38   38 0.4939557  1.6006077
## 39   39 0.5695971  0.3368656
## 40   40 0.3061279  0.8097768
## 41   41 0.3252484  0.9181810
## 42   42 0.1038349  0.7356261
## 43   43 0.5586815 -1.6792636
## 44   44 0.5755043 -1.2632507
## 45   45 0.6525123 -0.4817122
## 46   46 0.0817363  0.4237328
## 47   47 0.2909228 -0.5281235
## 48   48 0.8228959 -0.8033092
## 49   49 0.6465550  1.2597659
## 50   50 0.8106284  0.5356042
## 51   51 0.4156400 -1.5768429
## 52   52 0.7318564 -0.3998700
## 53   53 0.9284705  2.0509951
## 54   54 0.0479424 -1.0814005
## 55   55 0.2214975  2.7465039
## 56   56 0.2082043  0.7406373
## 57   57 0.4082175  0.5996262
## 58   58 0.8056410 -0.1231675
## 59   59 0.8769506 -0.2538888
## 60   60 0.2289836  0.8781263
## 61   61 0.3398220  0.0893617
## 62   62 0.9564127 -0.0491156
## 63   63 0.2990327 -1.6780207
## 64   64 0.0937122 -0.8592172
## 65   65 0.8184229 -0.4953985
## 66   66 0.0824383  0.1074724
## 67   67 0.4480014 -1.2873209
## 68   68 0.6013436  0.9839387
## 69   69 0.7148094 -2.2449691
## 70   70 0.7127794 -1.1497700
## 71   71 0.8910115 -0.3773183
## 72   72 0.8057945  0.5771112
## 73   73 0.2991844 -0.8564367
## 74   74 0.9531690  0.0488698
## 75   75 0.8224744  0.2558865
## 76   76 0.1595395 -0.6206067
## 77   77 0.2470473  1.2616062
## 78   78 0.5005391  0.7689725
## 79   79 0.8540629 -0.8929395
## 80   80 0.5489724  1.1226383
## 81   81 0.6291233 -0.6582681
## 82   82 0.0532046  0.7696861
## 83   83 0.0822400  1.0186585
## 84   84 0.8687992  1.1232048
## 85   85 0.0358033  0.0312500
## 86   86 0.7151640 -0.0947593
## 87   87 0.1777226  0.4128579
## 88   88 0.8634639  0.6866492
## 89   89 0.2417191  0.5369074
## 90   90 0.4193843  1.2604894
## 91   91 0.5686163 -0.4167681
## 92   92 0.6138069  0.8178558
## 93   93 0.2548529 -0.4137557
## 94   94 0.4306595  1.6270564
## 95   95 0.7506635  1.7803457
## 96   96 0.2660474  1.1950441
## 97   97 0.3079940 -1.3623472
## 98   98 0.6982003  0.0493619
## 99   99 0.5196785  0.0429677
## 100 100 0.9665260  1.6002956
## 101   1 0.0050184  0.3293716
## 102   2 0.1450430 -1.0659805
## 103   3 0.9306210  0.0059557
## 104   4 0.0478137  0.2718617
## 105   5 0.9166316 -0.6307349
## 106   6 0.7467375  0.3855689
## 107   7 0.2233456  1.3129355
## 108   8 0.9048643 -0.4330007
## 109   9 0.6539176 -1.0656918
## 110  10 0.7702912 -0.2095689
## 111  11 0.3876458  1.8202827
## 112  12 0.3618881 -0.1647675
## 113  13 0.7997884 -1.1416118
## 114  14 0.9600510 -0.3687121
## 115  15 0.3986461  0.4548723
## 116  16 0.2135665  0.5002771
## 117  17 0.1721996  0.0911074
## 118  18 0.6220638 -0.9055583
## 119  19 0.4083942  0.5755935
## 120  20 0.2404517  0.1726716
## 121  21 0.0263387 -0.0192462
## 122  22 0.7067306 -0.8043595
## 123  23 0.1682569  1.3059920
## 124  24 0.0955515 -0.4793747
## 125  25 0.7242629 -0.3373412
## 126  26 0.5495594 -1.2890557
## 127  27 0.5046848 -1.1350014
## 128  28 0.7234190 -1.3233172
## 129  29 0.5196818  1.5370953
## 130  30 0.3672783  0.1218874
## 131  31 0.7007317 -0.2212205
## 132  32 0.9172928  0.8463698
## 133  33 0.1743456 -0.0451544
## 134  34 0.5554566  0.4268652
## 135  35 0.0636974 -0.0786900
## 136  36 0.2859763 -1.6289265
## 137  37 0.0652860  0.6060063
## 138  38 0.4939557  1.6006077
## 139  39 0.5695971  0.3368656
## 140  40 0.3061279  0.8097768
## 141  41 0.3252484  0.9181810
## 142  42 0.1038349  0.7356261
## 143  43 0.5586815 -1.6792636
## 144  44 0.5755043 -1.2632507
## 145  45 0.6525123 -0.4817122
## 146  46 0.0817363  0.4237328
## 147  47 0.2909228 -0.5281235
## 148  48 0.8228959 -0.8033092
## 149  49 0.6465550  1.2597659
## 150  50 0.8106284  0.5356042
## 151  51 0.4156400 -1.5768429
## 152  52 0.7318564 -0.3998700
## 153  53 0.9284705  2.0509951
## 154  54 0.0479424 -1.0814005
## 155  55 0.2214975  2.7465039
## 156  56 0.2082043  0.7406373
## 157  57 0.4082175  0.5996262
## 158  58 0.8056410 -0.1231675
## 159  59 0.8769506 -0.2538888
## 160  60 0.2289836  0.8781263
## 161  61 0.3398220  0.0893617
## 162  62 0.9564127 -0.0491156
## 163  63 0.2990327 -1.6780207
## 164  64 0.0937122 -0.8592172
## 165  65 0.8184229 -0.4953985
## 166  66 0.0824383  0.1074724
## 167  67 0.4480014 -1.2873209
## 168  68 0.6013436  0.9839387
## 169  69 0.7148094 -2.2449691
## 170  70 0.7127794 -1.1497700
## 171  71 0.8910115 -0.3773183
## 172  72 0.8057945  0.5771112
## 173  73 0.2991844 -0.8564367
## 174  74 0.9531690  0.0488698
## 175  75 0.8224744  0.2558865
## 176  76 0.1595395 -0.6206067
## 177  77 0.2470473  1.2616062
## 178  78 0.5005391  0.7689725
## 179  79 0.8540629 -0.8929395
## 180  80 0.5489724  1.1226383
## 181  81 0.6291233 -0.6582681
## 182  82 0.0532046  0.7696861
## 183  83 0.0822400  1.0186585
## 184  84 0.8687992  1.1232048
## 185  85 0.0358033  0.0312500
## 186  86 0.7151640 -0.0947593
## 187  87 0.1777226  0.4128579
## 188  88 0.8634639  0.6866492
## 189  89 0.2417191  0.5369074
## 190  90 0.4193843  1.2604894
## 191  91 0.5686163 -0.4167681
## 192  92 0.6138069  0.8178558
## 193  93 0.2548529 -0.4137557
## 194  94 0.4306595  1.6270564
## 195  95 0.7506635  1.7803457
## 196  96 0.2660474  1.1950441
## 197  97 0.3079940 -1.3623472
## 198  98 0.6982003  0.0493619
## 199  99 0.5196785  0.0429677
## 200 100 0.9665260  1.6002956
## 201   1 0.0050184  0.3293716
## 202   2 0.1450430 -1.0659805
## 203   3 0.9306210  0.0059557
## 204   4 0.0478137  0.2718617
## 205   5 0.9166316 -0.6307349
## 206   6 0.7467375  0.3855689
## 207   7 0.2233456  1.3129355
## 208   8 0.9048643 -0.4330007
## 209   9 0.6539176 -1.0656918
## 210  10 0.7702912 -0.2095689
## 211  11 0.3876458  1.8202827
## 212  12 0.3618881 -0.1647675
## 213  13 0.7997884 -1.1416118
## 214  14 0.9600510 -0.3687121
## 215  15 0.3986461  0.4548723
## 216  16 0.2135665  0.5002771
## 217  17 0.1721996  0.0911074
## 218  18 0.6220638 -0.9055583
## 219  19 0.4083942  0.5755935
## 220  20 0.2404517  0.1726716
## 221  21 0.0263387 -0.0192462
## 222  22 0.7067306 -0.8043595
## 223  23 0.1682569  1.3059920
## 224  24 0.0955515 -0.4793747
## 225  25 0.7242629 -0.3373412
## 226  26 0.5495594 -1.2890557
## 227  27 0.5046848 -1.1350014
## 228  28 0.7234190 -1.3233172
## 229  29 0.5196818  1.5370953
## 230  30 0.3672783  0.1218874
## 231  31 0.7007317 -0.2212205
## 232  32 0.9172928  0.8463698
## 233  33 0.1743456 -0.0451544
## 234  34 0.5554566  0.4268652
## 235  35 0.0636974 -0.0786900
## 236  36 0.2859763 -1.6289265
## 237  37 0.0652860  0.6060063
## 238  38 0.4939557  1.6006077
## 239  39 0.5695971  0.3368656
## 240  40 0.3061279  0.8097768
## 241  41 0.3252484  0.9181810
## 242  42 0.1038349  0.7356261
## 243  43 0.5586815 -1.6792636
## 244  44 0.5755043 -1.2632507
## 245  45 0.6525123 -0.4817122
## 246  46 0.0817363  0.4237328
## 247  47 0.2909228 -0.5281235
## 248  48 0.8228959 -0.8033092
## 249  49 0.6465550  1.2597659
## 250  50 0.8106284  0.5356042
## 251  51 0.4156400 -1.5768429
## 252  52 0.7318564 -0.3998700
## 253  53 0.9284705  2.0509951
## 254  54 0.0479424 -1.0814005
## 255  55 0.2214975  2.7465039
## 256  56 0.2082043  0.7406373
## 257  57 0.4082175  0.5996262
## 258  58 0.8056410 -0.1231675
## 259  59 0.8769506 -0.2538888
## 260  60 0.2289836  0.8781263
## 261  61 0.3398220  0.0893617
## 262  62 0.9564127 -0.0491156
## 263  63 0.2990327 -1.6780207
## 264  64 0.0937122 -0.8592172
## 265  65 0.8184229 -0.4953985
## 266  66 0.0824383  0.1074724
## 267  67 0.4480014 -1.2873209
## 268  68 0.6013436  0.9839387
## 269  69 0.7148094 -2.2449691
## 270  70 0.7127794 -1.1497700
## 271  71 0.8910115 -0.3773183
## 272  72 0.8057945  0.5771112
## 273  73 0.2991844 -0.8564367
## 274  74 0.9531690  0.0488698
## 275  75 0.8224744  0.2558865
## 276  76 0.1595395 -0.6206067
## 277  77 0.2470473  1.2616062
## 278  78 0.5005391  0.7689725
## 279  79 0.8540629 -0.8929395
## 280  80 0.5489724  1.1226383
## 281  81 0.6291233 -0.6582681
## 282  82 0.0532046  0.7696861
## 283  83 0.0822400  1.0186585
## 284  84 0.8687992  1.1232048
## 285  85 0.0358033  0.0312500
## 286  86 0.7151640 -0.0947593
## 287  87 0.1777226  0.4128579
## 288  88 0.8634639  0.6866492
## 289  89 0.2417191  0.5369074
## 290  90 0.4193843  1.2604894
## 291  91 0.5686163 -0.4167681
## 292  92 0.6138069  0.8178558
## 293  93 0.2548529 -0.4137557
## 294  94 0.4306595  1.6270564
## 295  95 0.7506635  1.7803457
## 296  96 0.2660474  1.1950441
## 297  97 0.3079940 -1.3623472
## 298  98 0.6982003  0.0493619
## 299  99 0.5196785  0.0429677
## 300 100 0.9665260  1.6002956
```
Same again, but including filename:

```r
ldply(list.files(pattern="test.*\\.csv"), function(file){ df <- read.csv(file); df$name <- file; df})
```

```
##       X         a          b      name
## 1     1 0.0050184  0.3293716 test1.csv
## 2     2 0.1450430 -1.0659805 test1.csv
## 3     3 0.9306210  0.0059557 test1.csv
## 4     4 0.0478137  0.2718617 test1.csv
## 5     5 0.9166316 -0.6307349 test1.csv
## 6     6 0.7467375  0.3855689 test1.csv
## 7     7 0.2233456  1.3129355 test1.csv
## 8     8 0.9048643 -0.4330007 test1.csv
## 9     9 0.6539176 -1.0656918 test1.csv
## 10   10 0.7702912 -0.2095689 test1.csv
## 11   11 0.3876458  1.8202827 test1.csv
## 12   12 0.3618881 -0.1647675 test1.csv
## 13   13 0.7997884 -1.1416118 test1.csv
## 14   14 0.9600510 -0.3687121 test1.csv
## 15   15 0.3986461  0.4548723 test1.csv
## 16   16 0.2135665  0.5002771 test1.csv
## 17   17 0.1721996  0.0911074 test1.csv
## 18   18 0.6220638 -0.9055583 test1.csv
## 19   19 0.4083942  0.5755935 test1.csv
## 20   20 0.2404517  0.1726716 test1.csv
## 21   21 0.0263387 -0.0192462 test1.csv
## 22   22 0.7067306 -0.8043595 test1.csv
## 23   23 0.1682569  1.3059920 test1.csv
## 24   24 0.0955515 -0.4793747 test1.csv
## 25   25 0.7242629 -0.3373412 test1.csv
## 26   26 0.5495594 -1.2890557 test1.csv
## 27   27 0.5046848 -1.1350014 test1.csv
## 28   28 0.7234190 -1.3233172 test1.csv
## 29   29 0.5196818  1.5370953 test1.csv
## 30   30 0.3672783  0.1218874 test1.csv
## 31   31 0.7007317 -0.2212205 test1.csv
## 32   32 0.9172928  0.8463698 test1.csv
## 33   33 0.1743456 -0.0451544 test1.csv
## 34   34 0.5554566  0.4268652 test1.csv
## 35   35 0.0636974 -0.0786900 test1.csv
## 36   36 0.2859763 -1.6289265 test1.csv
## 37   37 0.0652860  0.6060063 test1.csv
## 38   38 0.4939557  1.6006077 test1.csv
## 39   39 0.5695971  0.3368656 test1.csv
## 40   40 0.3061279  0.8097768 test1.csv
## 41   41 0.3252484  0.9181810 test1.csv
## 42   42 0.1038349  0.7356261 test1.csv
## 43   43 0.5586815 -1.6792636 test1.csv
## 44   44 0.5755043 -1.2632507 test1.csv
## 45   45 0.6525123 -0.4817122 test1.csv
## 46   46 0.0817363  0.4237328 test1.csv
## 47   47 0.2909228 -0.5281235 test1.csv
## 48   48 0.8228959 -0.8033092 test1.csv
## 49   49 0.6465550  1.2597659 test1.csv
## 50   50 0.8106284  0.5356042 test1.csv
## 51   51 0.4156400 -1.5768429 test1.csv
## 52   52 0.7318564 -0.3998700 test1.csv
## 53   53 0.9284705  2.0509951 test1.csv
## 54   54 0.0479424 -1.0814005 test1.csv
## 55   55 0.2214975  2.7465039 test1.csv
## 56   56 0.2082043  0.7406373 test1.csv
## 57   57 0.4082175  0.5996262 test1.csv
## 58   58 0.8056410 -0.1231675 test1.csv
## 59   59 0.8769506 -0.2538888 test1.csv
## 60   60 0.2289836  0.8781263 test1.csv
## 61   61 0.3398220  0.0893617 test1.csv
## 62   62 0.9564127 -0.0491156 test1.csv
## 63   63 0.2990327 -1.6780207 test1.csv
## 64   64 0.0937122 -0.8592172 test1.csv
## 65   65 0.8184229 -0.4953985 test1.csv
## 66   66 0.0824383  0.1074724 test1.csv
## 67   67 0.4480014 -1.2873209 test1.csv
## 68   68 0.6013436  0.9839387 test1.csv
## 69   69 0.7148094 -2.2449691 test1.csv
## 70   70 0.7127794 -1.1497700 test1.csv
## 71   71 0.8910115 -0.3773183 test1.csv
## 72   72 0.8057945  0.5771112 test1.csv
## 73   73 0.2991844 -0.8564367 test1.csv
## 74   74 0.9531690  0.0488698 test1.csv
## 75   75 0.8224744  0.2558865 test1.csv
## 76   76 0.1595395 -0.6206067 test1.csv
## 77   77 0.2470473  1.2616062 test1.csv
## 78   78 0.5005391  0.7689725 test1.csv
## 79   79 0.8540629 -0.8929395 test1.csv
## 80   80 0.5489724  1.1226383 test1.csv
## 81   81 0.6291233 -0.6582681 test1.csv
## 82   82 0.0532046  0.7696861 test1.csv
## 83   83 0.0822400  1.0186585 test1.csv
## 84   84 0.8687992  1.1232048 test1.csv
## 85   85 0.0358033  0.0312500 test1.csv
## 86   86 0.7151640 -0.0947593 test1.csv
## 87   87 0.1777226  0.4128579 test1.csv
## 88   88 0.8634639  0.6866492 test1.csv
## 89   89 0.2417191  0.5369074 test1.csv
## 90   90 0.4193843  1.2604894 test1.csv
## 91   91 0.5686163 -0.4167681 test1.csv
## 92   92 0.6138069  0.8178558 test1.csv
## 93   93 0.2548529 -0.4137557 test1.csv
## 94   94 0.4306595  1.6270564 test1.csv
## 95   95 0.7506635  1.7803457 test1.csv
## 96   96 0.2660474  1.1950441 test1.csv
## 97   97 0.3079940 -1.3623472 test1.csv
## 98   98 0.6982003  0.0493619 test1.csv
## 99   99 0.5196785  0.0429677 test1.csv
## 100 100 0.9665260  1.6002956 test1.csv
## 101   1 0.0050184  0.3293716 test2.csv
## 102   2 0.1450430 -1.0659805 test2.csv
## 103   3 0.9306210  0.0059557 test2.csv
## 104   4 0.0478137  0.2718617 test2.csv
## 105   5 0.9166316 -0.6307349 test2.csv
## 106   6 0.7467375  0.3855689 test2.csv
## 107   7 0.2233456  1.3129355 test2.csv
## 108   8 0.9048643 -0.4330007 test2.csv
## 109   9 0.6539176 -1.0656918 test2.csv
## 110  10 0.7702912 -0.2095689 test2.csv
## 111  11 0.3876458  1.8202827 test2.csv
## 112  12 0.3618881 -0.1647675 test2.csv
## 113  13 0.7997884 -1.1416118 test2.csv
## 114  14 0.9600510 -0.3687121 test2.csv
## 115  15 0.3986461  0.4548723 test2.csv
## 116  16 0.2135665  0.5002771 test2.csv
## 117  17 0.1721996  0.0911074 test2.csv
## 118  18 0.6220638 -0.9055583 test2.csv
## 119  19 0.4083942  0.5755935 test2.csv
## 120  20 0.2404517  0.1726716 test2.csv
## 121  21 0.0263387 -0.0192462 test2.csv
## 122  22 0.7067306 -0.8043595 test2.csv
## 123  23 0.1682569  1.3059920 test2.csv
## 124  24 0.0955515 -0.4793747 test2.csv
## 125  25 0.7242629 -0.3373412 test2.csv
## 126  26 0.5495594 -1.2890557 test2.csv
## 127  27 0.5046848 -1.1350014 test2.csv
## 128  28 0.7234190 -1.3233172 test2.csv
## 129  29 0.5196818  1.5370953 test2.csv
## 130  30 0.3672783  0.1218874 test2.csv
## 131  31 0.7007317 -0.2212205 test2.csv
## 132  32 0.9172928  0.8463698 test2.csv
## 133  33 0.1743456 -0.0451544 test2.csv
## 134  34 0.5554566  0.4268652 test2.csv
## 135  35 0.0636974 -0.0786900 test2.csv
## 136  36 0.2859763 -1.6289265 test2.csv
## 137  37 0.0652860  0.6060063 test2.csv
## 138  38 0.4939557  1.6006077 test2.csv
## 139  39 0.5695971  0.3368656 test2.csv
## 140  40 0.3061279  0.8097768 test2.csv
## 141  41 0.3252484  0.9181810 test2.csv
## 142  42 0.1038349  0.7356261 test2.csv
## 143  43 0.5586815 -1.6792636 test2.csv
## 144  44 0.5755043 -1.2632507 test2.csv
## 145  45 0.6525123 -0.4817122 test2.csv
## 146  46 0.0817363  0.4237328 test2.csv
## 147  47 0.2909228 -0.5281235 test2.csv
## 148  48 0.8228959 -0.8033092 test2.csv
## 149  49 0.6465550  1.2597659 test2.csv
## 150  50 0.8106284  0.5356042 test2.csv
## 151  51 0.4156400 -1.5768429 test2.csv
## 152  52 0.7318564 -0.3998700 test2.csv
## 153  53 0.9284705  2.0509951 test2.csv
## 154  54 0.0479424 -1.0814005 test2.csv
## 155  55 0.2214975  2.7465039 test2.csv
## 156  56 0.2082043  0.7406373 test2.csv
## 157  57 0.4082175  0.5996262 test2.csv
## 158  58 0.8056410 -0.1231675 test2.csv
## 159  59 0.8769506 -0.2538888 test2.csv
## 160  60 0.2289836  0.8781263 test2.csv
## 161  61 0.3398220  0.0893617 test2.csv
## 162  62 0.9564127 -0.0491156 test2.csv
## 163  63 0.2990327 -1.6780207 test2.csv
## 164  64 0.0937122 -0.8592172 test2.csv
## 165  65 0.8184229 -0.4953985 test2.csv
## 166  66 0.0824383  0.1074724 test2.csv
## 167  67 0.4480014 -1.2873209 test2.csv
## 168  68 0.6013436  0.9839387 test2.csv
## 169  69 0.7148094 -2.2449691 test2.csv
## 170  70 0.7127794 -1.1497700 test2.csv
## 171  71 0.8910115 -0.3773183 test2.csv
## 172  72 0.8057945  0.5771112 test2.csv
## 173  73 0.2991844 -0.8564367 test2.csv
## 174  74 0.9531690  0.0488698 test2.csv
## 175  75 0.8224744  0.2558865 test2.csv
## 176  76 0.1595395 -0.6206067 test2.csv
## 177  77 0.2470473  1.2616062 test2.csv
## 178  78 0.5005391  0.7689725 test2.csv
## 179  79 0.8540629 -0.8929395 test2.csv
## 180  80 0.5489724  1.1226383 test2.csv
## 181  81 0.6291233 -0.6582681 test2.csv
## 182  82 0.0532046  0.7696861 test2.csv
## 183  83 0.0822400  1.0186585 test2.csv
## 184  84 0.8687992  1.1232048 test2.csv
## 185  85 0.0358033  0.0312500 test2.csv
## 186  86 0.7151640 -0.0947593 test2.csv
## 187  87 0.1777226  0.4128579 test2.csv
## 188  88 0.8634639  0.6866492 test2.csv
## 189  89 0.2417191  0.5369074 test2.csv
## 190  90 0.4193843  1.2604894 test2.csv
## 191  91 0.5686163 -0.4167681 test2.csv
## 192  92 0.6138069  0.8178558 test2.csv
## 193  93 0.2548529 -0.4137557 test2.csv
## 194  94 0.4306595  1.6270564 test2.csv
## 195  95 0.7506635  1.7803457 test2.csv
## 196  96 0.2660474  1.1950441 test2.csv
## 197  97 0.3079940 -1.3623472 test2.csv
## 198  98 0.6982003  0.0493619 test2.csv
## 199  99 0.5196785  0.0429677 test2.csv
## 200 100 0.9665260  1.6002956 test2.csv
## 201   1 0.0050184  0.3293716 test3.csv
## 202   2 0.1450430 -1.0659805 test3.csv
## 203   3 0.9306210  0.0059557 test3.csv
## 204   4 0.0478137  0.2718617 test3.csv
## 205   5 0.9166316 -0.6307349 test3.csv
## 206   6 0.7467375  0.3855689 test3.csv
## 207   7 0.2233456  1.3129355 test3.csv
## 208   8 0.9048643 -0.4330007 test3.csv
## 209   9 0.6539176 -1.0656918 test3.csv
## 210  10 0.7702912 -0.2095689 test3.csv
## 211  11 0.3876458  1.8202827 test3.csv
## 212  12 0.3618881 -0.1647675 test3.csv
## 213  13 0.7997884 -1.1416118 test3.csv
## 214  14 0.9600510 -0.3687121 test3.csv
## 215  15 0.3986461  0.4548723 test3.csv
## 216  16 0.2135665  0.5002771 test3.csv
## 217  17 0.1721996  0.0911074 test3.csv
## 218  18 0.6220638 -0.9055583 test3.csv
## 219  19 0.4083942  0.5755935 test3.csv
## 220  20 0.2404517  0.1726716 test3.csv
## 221  21 0.0263387 -0.0192462 test3.csv
## 222  22 0.7067306 -0.8043595 test3.csv
## 223  23 0.1682569  1.3059920 test3.csv
## 224  24 0.0955515 -0.4793747 test3.csv
## 225  25 0.7242629 -0.3373412 test3.csv
## 226  26 0.5495594 -1.2890557 test3.csv
## 227  27 0.5046848 -1.1350014 test3.csv
## 228  28 0.7234190 -1.3233172 test3.csv
## 229  29 0.5196818  1.5370953 test3.csv
## 230  30 0.3672783  0.1218874 test3.csv
## 231  31 0.7007317 -0.2212205 test3.csv
## 232  32 0.9172928  0.8463698 test3.csv
## 233  33 0.1743456 -0.0451544 test3.csv
## 234  34 0.5554566  0.4268652 test3.csv
## 235  35 0.0636974 -0.0786900 test3.csv
## 236  36 0.2859763 -1.6289265 test3.csv
## 237  37 0.0652860  0.6060063 test3.csv
## 238  38 0.4939557  1.6006077 test3.csv
## 239  39 0.5695971  0.3368656 test3.csv
## 240  40 0.3061279  0.8097768 test3.csv
## 241  41 0.3252484  0.9181810 test3.csv
## 242  42 0.1038349  0.7356261 test3.csv
## 243  43 0.5586815 -1.6792636 test3.csv
## 244  44 0.5755043 -1.2632507 test3.csv
## 245  45 0.6525123 -0.4817122 test3.csv
## 246  46 0.0817363  0.4237328 test3.csv
## 247  47 0.2909228 -0.5281235 test3.csv
## 248  48 0.8228959 -0.8033092 test3.csv
## 249  49 0.6465550  1.2597659 test3.csv
## 250  50 0.8106284  0.5356042 test3.csv
##  [ reached getOption("max.print") -- omitted 50 rows ]
```
This is where plyr can be very useful; `ply` commands can be nested, and you can write functions to apply and let R deal with combining the result. Easier than loops  using rbind, and usually faster.

Plyr can parallelise by setting `.parallel` to `TRUE`, and can show progress bars for long-running operations.
